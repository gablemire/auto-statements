service: auto-receipt

provider:
  name: google
  stage: production
  runtime: nodejs10
  region: us-east1
  project: auto-receipt-prod
  credentials: ./.gcloud/keyfile.production.json
  memorySize: 128
  labels:
    environment: ${self:provider.stage}
  environment:
    API__APITOKEN: ${file(./.gcloud/secrets.production.yml):api.apiToken}
    NODE_ENV: production
    FUNCTION_REGION: ${self:provider.region}

plugins:
  - serverless-google-cloudfunctions

package:
  exclude:
    - ./**
  include:
    - lib/**
    - config/**
    - package.json
    - package-lock.json

functions:
  paypalIpn:
    handler: paypalIpn
    events:
      - http: http

  createCheque:
    handler: createCheque
    events:
      - http: http

  listDonations:
    handler: listDonations
    events:
      - http: http
